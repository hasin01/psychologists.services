import{i as N,g as U,a as I,c as W,u as j,s as H,b as K,o as x,d as M,e as Z,f as G,h as J,q as w,j as S,k as q,l as O,m as E,n as P}from"./vendor-CwnuWi2a.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const p of s)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function a(s){const p={};return s.integrity&&(p.integrity=s.integrity),s.referrerPolicy&&(p.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?p.credentials="include":s.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(s){if(s.ep)return;s.ep=!0;const p=a(s);fetch(s.href,p)}})();const e={backgroundModal:document.querySelector(".modal"),formLoginModal:document.querySelector(".form-login-modal"),formLoginCloseBtn:document.querySelector(".form-login-close-btn"),formLoginOpen:document.querySelector(".auth-item-login"),formRegisterOpen:document.querySelector(".auth-item-register"),formRegisterModal:document.querySelector(".form-register-modal"),formRegisterCloseBtn:document.querySelector(".form-register-close-btn"),formRegister:document.querySelector(".form-registration"),formLogin:document.querySelector(".form-login"),registerNameInput:document.querySelector(".form-name-input-register-js"),registerEmailInput:document.querySelector(".form-email-input-register-js"),registerPasswordInput:document.querySelector(".form-password-input-register-js"),loginEmailInput:document.querySelector(".form-email-input-login-js"),loginPasswordInput:document.querySelector(".form-password-input-login-js"),authBtn:document.querySelector(".auth-wrapper"),userInfo:document.querySelector(".user-info"),userName:document.querySelector(".user-name"),signOutBtn:document.querySelector(".user-logout"),navList:document.querySelector(".nav-list"),navHome:document.querySelector(".nav-home"),navPsychologists:document.querySelector(".nav-psychologist"),navFavorites:document.querySelector(".nav-favorites"),pageFavorites:document.querySelector(".nav-list-item-favorites"),sortPsichologs:document.querySelector(".sort-psichologs"),customSelectTrigger:document.querySelector(".custom-select-trigger"),customOption:document.querySelectorAll(".custom-option"),customSelect:document.querySelector(".custom-select"),paginationBtn:document.querySelector(".pagination-prev"),customSelect:document.querySelector(".custom-select"),customSelectTrigger:document.querySelector(".custom-select-trigger"),customOption:document.querySelectorAll(".custom-option"),loaderWraper:document.querySelector(".loader-wrapper"),card:document.querySelector(".psicholog-list-item"),cardFavoriteBtn:document.querySelectorAll(".psicholog-favorite-btn")},Y={apiKey:"AIzaSyBtgyesIcDyvFIh-YBM6E33MhgPDKypzII",authDomain:"psychologistsservices.firebaseapp.com",databaseURL:"https://psychologistsservices-default-rtdb.firebaseio.com",projectId:"psychologistsservices",storageBucket:"psychologistsservices.firebasestorage.app",messagingSenderId:"718750248328",appId:"1:718750248328:web:573026e49e9fc425809e3d",measurementId:"G-5J9TZ4E4D9"},Q=N(Y),f=U(Q),X=async(t,i,a)=>{try{const s=(await W(f,t,i)).user;return await j(s,{displayName:a}),console.log("User registered and profile updated:",s),s}catch(c){const s=c.code,p=c.message;throw console.error(`Error ${s}: ${p}`),c}},ee=async(t,i)=>{try{const a=await H(f,t,i);return console.log("Пользователь вошел в систему:",a.user),a.user}catch(a){const c=a.code,s=a.message;throw console.error(`Ошибка ${c}: ${s}`),a}},$=I(),te=async t=>{try{const i=f.currentUser;if(i){const a=i.uid,c=M($,"psychologists",t),s=await Z(c);if(s.exists()){const m={...s.data(),id:t},d=M($,"users",a,"profiles",t);await G(d,m),console.log("Объект успешно добавлен в профиль пользователя.")}else console.log("Документ не найден.")}else console.log("Пользователь не авторизован.")}catch(i){console.error("Ошибка обновления профиля:",i)}},R=async t=>{try{const i=f.currentUser;if(i){const a=i.uid,c=M($,"users",a,"profiles",t);await J(c),console.log("Документ успешно удалён из профиля пользователя.")}else console.log("Пользователь не авторизован.")}catch(i){console.error("Ошибка удаления профиля:",i)}},ie=()=>{K(f).then(()=>{console.log("signOut")}).catch(t=>{console.error("Sign out error:",t)})},z=t=>{x(f,i=>{i?(i.displayName,t(i)):t(null)})};e.signOutBtn&&e.signOutBtn.addEventListener("click",()=>{ie()});const A=t=>{if(t)if(t.displayName)e.userInfo.style.display="flex",e.userName.textContent=t.displayName,e.authBtn.classList.add("is-hidden"),e.pageFavorites.classList.remove("is-hidden");else return;else e.userInfo.style.display="none",e.userName.textContent="",e.authBtn.classList.remove("is-hidden-modal"),e.authBtn.classList.remove("is-hidden"),e.pageFavorites.classList.add("is-hidden")};z(A);const _=t=>{t.keyCode===27&&se()},T=t=>{t.classList.remove("is-hidden-modal"),e.backgroundModal.classList.remove("is-hidden-modal"),document.addEventListener("keydown",_)},v=t=>{t.classList.add("is-hidden-modal"),e.backgroundModal.classList.add("is-hidden-modal"),document.removeEventListener("keydown",_),z(A)},se=()=>{v(e.formLoginModal),v(e.formRegisterModal)};e.formLoginOpen&&e.formLoginOpen.addEventListener("click",()=>{T(e.formLoginModal)});e.formLoginCloseBtn&&e.formLoginCloseBtn.addEventListener("click",()=>{v(e.formLoginModal)});e.formRegisterOpen&&e.formRegisterOpen.addEventListener("click",()=>{T(e.formRegisterModal)});e.formRegisterCloseBtn&&e.formRegisterCloseBtn.addEventListener("click",()=>{v(e.formRegisterModal)});e.backgroundModal&&e.backgroundModal.addEventListener("click",t=>{t.target===e.backgroundModal&&(v(e.formLoginModal),v(e.formRegisterModal))});e.formRegister&&e.formRegister.addEventListener("submit",async t=>{t.preventDefault();const i=e.registerEmailInput.value,a=e.registerPasswordInput.value,c=e.registerNameInput.value;try{await X(i,a,c),v(e.formRegisterModal)}catch(s){alert("Registration failed"),console.error("Registration failed:",s)}});e.formLogin&&e.formLogin.addEventListener("submit",async t=>{t.preventDefault();const i=e.loginEmailInput.value,a=e.loginPasswordInput.value;try{await ee(i,a),v(e.formLoginModal)}catch(c){alert("Login failed"),console.error("Login failed:",c)}});const b="data:image/svg+xml,%3csvg%20width='26.000000'%20height='26.000000'%20viewBox='0%200%2026%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs%3e%3cclipPath%20id='clip41_352'%3e%3crect%20id='heart'%20rx='0.000000'%20width='25.000000'%20height='25.000000'%20transform='translate(0.500000%200.500000)'%20fill='white'%20fill-opacity='0'/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='heart'%20rx='0.000000'%20width='25.000000'%20height='25.000000'%20transform='translate(0.500000%200.500000)'%20fill='%23FFFFFF'%20fill-opacity='0'/%3e%3cg%20clip-path='url(%23clip41_352)'%3e%3cpath%20id='Vector'%20d='M20.64%203.7C19.92%203.4%2019.14%203.24%2018.36%203.24C17.57%203.24%2016.8%203.4%2016.08%203.7C15.35%204%2014.7%204.44%2014.14%204.99L13%206.14L11.85%204.99C10.73%203.87%209.21%203.24%207.63%203.24C6.05%203.24%204.54%203.87%203.42%204.99C2.3%206.11%201.67%207.62%201.67%209.2C1.67%2010.78%202.3%2012.3%203.42%2013.42L4.57%2014.57L13%2022.99L21.42%2014.57L22.57%2013.42C23.13%2012.86%2023.56%2012.21%2023.86%2011.48C24.16%2010.76%2024.32%209.99%2024.32%209.2C24.32%208.42%2024.16%207.65%2023.86%206.92C23.56%206.2%2023.13%205.54%2022.57%204.99C22.02%204.44%2021.36%204%2020.64%203.7Z'%20stroke='%23191A15'%20stroke-opacity='1.000000'%20stroke-width='2.000000'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",B="data:image/svg+xml,%3csvg%20width='26.000000'%20height='26.000000'%20viewBox='0%200%2024.645%2021.7512'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3cpath%20id='Vector'%20d='M21.89%202.74C21.34%202.19%2020.68%201.75%2019.96%201.45C19.24%201.15%2018.46%201%2017.68%201C16.9%201%2016.12%201.15%2015.4%201.45C14.68%201.75%2014.02%202.19%2013.47%202.74L12.32%203.89L11.17%202.74C10.05%201.62%208.54%201%206.95%201C5.37%201%203.86%201.62%202.74%202.74C1.62%203.86%201%205.37%201%206.96C1%208.54%201.62%2010.05%202.74%2011.17L3.89%2012.32L12.32%2020.75L20.75%2012.32L21.89%2011.17C22.45%2010.62%2022.89%209.96%2023.19%209.24C23.49%208.51%2023.64%207.74%2023.64%206.96C23.64%206.17%2023.49%205.4%2023.19%204.67C22.89%203.95%2022.45%203.29%2021.89%202.74Z'%20fill='%2354BE96'%20fill-opacity='1.000000'%20fill-rule='nonzero'/%3e%3cpath%20id='Vector'%20d='M19.96%201.45C19.24%201.15%2018.46%201%2017.68%201C16.9%201%2016.12%201.15%2015.4%201.45C14.68%201.75%2014.02%202.19%2013.47%202.74L12.32%203.89L11.17%202.74C10.05%201.62%208.54%201%206.95%201C5.37%201%203.86%201.62%202.74%202.74C1.62%203.86%201%205.37%201%206.96C1%208.54%201.62%2010.05%202.74%2011.17L3.89%2012.32L12.32%2020.75L20.75%2012.32L21.89%2011.17C22.45%2010.62%2022.89%209.96%2023.19%209.24C23.49%208.51%2023.64%207.74%2023.64%206.96C23.64%206.17%2023.49%205.4%2023.19%204.67C22.89%203.95%2022.45%203.29%2021.89%202.74C21.34%202.19%2020.68%201.75%2019.96%201.45Z'%20stroke='%2354BE96'%20stroke-opacity='1.000000'%20stroke-width='2.000000'%20stroke-linejoin='round'/%3e%3c/svg%3e";if(window.location.pathname==="/psychologists.services/psychologists.html"){const t=I(),i={field:"name",order:"asc",limit:3,lastVisibleDoc:null,isPaginationFinished:!1};let a=[],c=[];const s=()=>{e.paginationBtn.classList.remove("is-hidden"),e.loaderWraper.classList.add("is-hidden")},p=()=>{e.paginationBtn.classList.add("is-hidden"),e.loaderWraper.classList.remove("is-hidden")},m=async()=>{try{if(p(),i.isPaginationFinished)return;const o=i.lastVisibleDoc?w(S(t,"psychologists"),q(i.field,i.order),O(i.lastVisibleDoc),E(i.limit)):w(S(t,"psychologists"),q(i.field,i.order),E(i.limit)),n=await P(o);if(n.size===0)i.isPaginationFinished=!0;else{i.lastVisibleDoc=n.docs[n.docs.length-1];const r=n.docs.map(g=>({id:g.id,...g.data()}));a=a.concat(r),await d(f.currentUser),u(a)}}catch(o){console.error("Error fetching data:",o)}finally{s()}},d=async o=>{try{if(!o){console.error("User is not authenticated.");return}const n=w(S(t,"users",o.uid,"profiles"));c=(await P(n)).docs.map(g=>g.id),console.log("Favorites fetched:",c)}catch(n){console.error("Error fetching data:",n)}},u=o=>{const n=document.querySelector(".psicholog-list");n.innerHTML="",o.map(r=>{const g=c.includes(r.id),h=document.createElement("li");h.dataset.id=r.id,h.classList.add("psicholog-list-item"),h.innerHTML=`
      <div>
        <img src="${r.avatar_url}" alt="psychologist" class="psicholog-img" width="96px" height="96px">
      </div>
      <div class="psicholog-info">
        <p class="psicholog-title">Psychologist</p>
        <h3 class="psicholog-name">${r.name}</h3>
        <ul class="psicholog-specialization">
          <li class="psicholog-specialization-item">Experience: <span>${r.experience}</span></li>
          <li class="psicholog-specialization-item">License: <span>${r.license}</span></li>
          <li class="psicholog-specialization-item">Specialization: <span>${r.specialization}</span></li>
          <li class="psicholog-specialization-item">Initial consultation: <span>${r.initial_consultation}</span></li>
        </ul>
        <p class="psicholog-description">${r.about}</p>
        <button class="psicholog-btn">Read more</button>
        <div class="psicholog-rating-price-wrapper">
          <div class="psicholog-rating">Rating: <span>${r.rating}</span></div>
          <div class="psicholog-rating-line"></div>
          <div class="psicholog-price">Price / 1 hour: <span>${r.price_per_hour}</span></div>
          <button><img class="psicholog-favorite-btn" src="${g?B:b}" alt="favorite" ></button>
        </div>
      </div>
    `,h.querySelector(".psicholog-btn").addEventListener("click",y=>{const k=h.querySelector(".psicholog-info"),D="reviews-list";let L=k.querySelector(`#${D}`);L?L.remove():(L=document.createElement("ul"),L.id=D,r.reviews&&r.reviews.length>0&&r.reviews.forEach((C,V)=>{V<2&&(L.innerHTML+=`
                      <li class="profile-reviewer-item">
                          <div class="profile-reviewer-info-wrapper">
                              <div class="profile-reviewer-img">${C.reviewer[0]}</div>
                              <div class="profile-reviewer-info">
                                  <h4 class="reviews-reviewer">${C.reviewer}</h4>
                                  <p class="reviews-rating">${C.rating}</p>
                              </div>
                          </div>
                          <p class="reviews-comment">${C.comment}</p>
                      </li>
                      `)}),k.appendChild(L))}),h.querySelector(".psicholog-favorite-btn").addEventListener("click",y=>{y.target.src.includes(b)?(y.target.src=B,te(r.id)):(y.target.src=b,R(r.id))}),n.appendChild(h)})},l=o=>{const n={"a-z":{field:"name",order:"asc"},"z-a":{field:"name",order:"desc"},"less-than-10":{field:"price_per_hour",order:"asc"},"greater-than-10":{field:"price_per_hour",order:"desc"},popular:{field:"rating",order:"desc"},"not-popular":{field:"rating",order:"asc"}};if(n[o]){const{field:r,order:g}=n[o];i.field=r,i.order=g,i.lastVisibleDoc=null,i.isPaginationFinished=!1,a=[],m()}};e.customSelectTrigger&&(e.customSelectTrigger.addEventListener("click",function(){e.customSelect.classList.toggle("open")}),e.customOption.forEach(o=>{o.addEventListener("click",function(){e.customSelectTrigger.textContent=this.textContent,e.customOption.forEach(n=>n.classList.remove("custom-select-active")),this.classList.add("custom-select-active"),l(this.dataset.value),e.customSelect.classList.remove("open")})}),document.addEventListener("click",o=>{e.customSelect.contains(o.target)||e.customSelect.classList.remove("open")})),document.addEventListener("DOMContentLoaded",()=>{e.paginationBtn&&e.paginationBtn.addEventListener("click",()=>{if(i.isPaginationFinished){e.paginationBtn.classList.add("is-hidden");return}m()})}),x(f,o=>{o?d(o).then(()=>{m()}):m()})}const F=I();if(window.location.pathname==="/psychologists.services/favorites.html"){const t={field:"name",order:"asc",limit:3,lastVisibleDoc:null,isPaginationFinished:!1};let i=[];const a=()=>{e.loaderWraper.classList.add("is-hidden")},c=()=>{e.loaderWraper.classList.remove("is-hidden")},s=async d=>{try{if(c(),t.isPaginationFinished)return;if(!d){console.error("User is not authenticated.");return}const u=t.lastVisibleDoc?w(S(F,"users",d.uid,"profiles"),q(t.field,t.order),O(t.lastVisibleDoc),E(t.limit)):w(S(F,"users",d.uid,"profiles"),q(t.field,t.order),E(t.limit)),l=await P(u);if(l.size===0)t.isPaginationFinished=!0,e.paginationBtn.classList.add("is-hidden");else{t.lastVisibleDoc=l.docs[l.docs.length-1];const o=l.docs.map(n=>({id:n.id,...n.data()}));i=i.concat(o),p(i),i.length===0?e.paginationBtn.classList.add("is-hidden"):e.paginationBtn.classList.remove("is-hidden")}}catch(u){console.error("Error fetching data:",u)}finally{a()}},p=d=>{const u=document.querySelector(".psicholog-list");u.innerHTML="",d.forEach(l=>{const o=document.createElement("li");o.dataset.id=l.id,o.classList.add("psicholog-list-item"),o.innerHTML=`
            <div>
                <img src="${l.avatar_url}" alt="psychologist" class="psicholog-img" width="96px" height="96px">
            </div>
            <div class="psicholog-info">
                <p class="psicholog-title">Psychologist</p>
                <h3 class="psicholog-name">${l.name}</h3>
                <ul class="psicholog-specialization">
                    <li class="psicholog-specialization-item">Experience: <span>${l.experience}</span></li>
                    <li class="psicholog-specialization-item">License: <span>${l.license}</span></li>
                    <li class="psicholog-specialization-item">Specialization: <span>${l.specialization}</span></li>
                    <li class="psicholog-specialization-item">Initial consultation: <span>${l.initial_consultation}</span></li>
                </ul>
                <p class="psicholog-description">${l.about}</p>
                <button class="psicholog-btn">Read more</button>
                <div class="psicholog-rating-price-wrapper">
                    <div class="psicholog-rating">Rating: <span>${l.rating}</span></div>
                    <div class="psicholog-rating-line"></div>
                    <div class="psicholog-price">Price / 1 hour: <span>${l.price_per_hour}</span></div>
                    <button><img class="psicholog-favorite-btn" src="${B}" alt="favorite"></button>
                </div>
            </div>
        `,o.querySelector(".psicholog-btn").addEventListener("click",()=>{const n=o.querySelector(".psicholog-info"),r="reviews-list";let g=n.querySelector(`#${r}`);g?g.remove():(g=document.createElement("ul"),g.id=r,l.reviews&&l.reviews.length>0&&l.reviews.forEach((h,y)=>{y<2&&(g.innerHTML+=`
                          <li class="profile-reviewer-item">
                              <div class="profile-reviewer-info-wrapper">
                                  <div class="profile-reviewer-img">${h.reviewer[0]}</div>
                                  <div class="profile-reviewer-info">
                                      <h4 class="reviews-reviewer">${h.reviewer}</h4>
                                      <p class="reviews-rating">${h.rating}</p>
                                  </div>
                              </div>
                              <p class="reviews-comment">${h.comment}</p>
                          </li>
                          `)}),n.appendChild(g))}),o.querySelector(".psicholog-favorite-btn").addEventListener("click",n=>{n.target.src=b;const r=n.target.closest("li");r&&r.remove(),R(l.id)}),u.appendChild(o)})},m=d=>{const u={"a-z":{field:"name",order:"asc"},"z-a":{field:"name",order:"desc"},"less-than-10":{field:"price_per_hour",order:"asc"},"greater-than-10":{field:"price_per_hour",order:"desc"},popular:{field:"rating",order:"desc"},"not-popular":{field:"rating",order:"asc"}};if(u[d]){const{field:l,order:o}=u[d];t.field=l,t.order=o,t.lastVisibleDoc=null,t.isPaginationFinished=!1,i=[],s(f.currentUser)}};e.customSelectTrigger&&(e.customSelectTrigger.addEventListener("click",()=>{e.customSelect.classList.toggle("open")}),e.customOption.forEach(d=>{d.addEventListener("click",function(){e.customSelectTrigger.textContent=this.textContent,e.customOption.forEach(u=>u.classList.remove("custom-select-active")),this.classList.add("custom-select-active"),m(this.dataset.value),e.customSelect.classList.remove("open")})}),document.addEventListener("click",d=>{e.customSelect.contains(d.target)||e.customSelect.classList.remove("open")})),document.addEventListener("DOMContentLoaded",()=>{e.paginationBtn&&e.paginationBtn.addEventListener("click",()=>{if(t.isPaginationFinished){e.paginationBtn.classList.add("is-hidden");return}s(f.currentUser)}),x(f,d=>{d&&s(d)})})}switch(window.location.pathname){case"/psychologists.services/index.html":e.navHome.classList.add("nav-list-item-active");break;case"/psychologists.services/psychologists.html":e.navPsychologists.classList.add("nav-list-item-active");break;case"/psychologists.services/favorites.html":e.navFavorites.classList.add("nav-list-item-active");break}
//# sourceMappingURL=main-B2hX57wE.js.map
