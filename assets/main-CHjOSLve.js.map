{"version":3,"file":"main-CHjOSLve.js","sources":["../../src/js/firebase.js","../../src/js/auth.js","../../src/main.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\n  databaseURL: import.meta.env.VITE_FIREBASE_DATABASE_URL,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APP_ID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID\n};\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\nconst auth = getAuth(app);\n\nexport { app, auth };","import { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, updateProfile, signOut } from \"firebase/auth\";\nimport { auth } from \"./firebase\";\n\nconst register = async (email, password, displayName) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    await updateProfile(user, {\n      displayName: displayName\n    });\n    console.log(\"User registered and profile updated:\", user);\n    return user;\n  } catch (error) {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.error(`Error ${errorCode}: ${errorMessage}`);\n    throw error;\n  }\n};\n\nconst login = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return userCredential.user;\n  } catch (error) {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.error(`Error ${errorCode}: ${errorMessage}`);\n    throw error;\n  }\n};\n\nconst signOutUser = () => {\n  signOut(auth).then(() => {\n    console.log(\"signOut\");\n  }).catch((error) => {\n    console.error(\"Sign out error:\", error);\n  });\n};\n\nconst monitorAuthState =  (updateUI) => {\n onAuthStateChanged(auth, (user) => {\n    if (user) {\n      const uid = user.displayName;\n      updateUI(user);\n    } else {\n      updateUI(null);\n    }\n  });\n};\n\nexport { register, login, monitorAuthState, signOutUser };\n","import { login, monitorAuthState, register, signOutUser } from \"./js/auth\";\n\nconst refs = {\n  backgroundModal: document.querySelector(\".modal\"),\n  formLoginModal: document.querySelector(\".form-login-modal\"),\n  formLoginCloseBtn: document.querySelector(\".form-login-close-btn\"),\n  formLoginOpen: document.querySelector(\".auth-item-login\"),\n  formRegisterOpen: document.querySelector(\".auth-item-register\"),\n  formRegisterModal: document.querySelector(\".form-register-modal\"),\n  formRegisterCloseBtn: document.querySelector(\".form-register-close-btn\"),\n  formRegister: document.querySelector(\".form-registration\"),\n  formLogin: document.querySelector(\".form-login\"),\n  registerNameInput: document.querySelector(\".form-name-input-register-js\"),\n  registerEmailInput: document.querySelector(\".form-email-input-register-js\"),\n  registerPasswordInput: document.querySelector(\n    \".form-password-input-register-js\"\n  ),\n  loginEmailInput: document.querySelector(\".form-email-input-login-js\"),\n  loginPasswordInput: document.querySelector(\".form-password-input-login-js\"),\n  authBtn: document.querySelector(\".auth-wrapper\"),\n  userInfo: document.querySelector(\".user-info\"),\n  userName: document.querySelector(\".user-name\"),\n  signOutBtn: document.querySelector(\".user-logout\"),\n  navList: document.querySelector(\".nav-list\"),\n};\n\nconst handelKeyDown = (e) => {\n  if (e.keyCode === 27) {\n    closeModal(refs.formLoginModal);\n    closeModal(refs.formRegisterModal);\n  }\n};\n\nconst openModal = (modal) => {\n  modal.classList.remove(\"is-hidden-modal\");\n  refs.backgroundModal.classList.remove(\"is-hidden-modal\");\n  document.addEventListener(\"keydown\", handelKeyDown);\n};\n\nconst closeModal = (modal) => {\n  modal.classList.add(\"is-hidden-modal\");\n  refs.backgroundModal.classList.add(\"is-hidden-modal\");\n  document.removeEventListener(\"keydown\", handelKeyDown);\n};\n\nif (refs.formLoginOpen) {\n  refs.formLoginOpen.addEventListener(\"click\", () => {\n    openModal(refs.formLoginModal);\n  });\n}\n\nif (refs.formLoginCloseBtn) {\n  refs.formLoginCloseBtn.addEventListener(\"click\", () => {\n    closeModal(refs.formLoginModal);\n  });\n}\n\nif (refs.formRegisterOpen) {\n  refs.formRegisterOpen.addEventListener(\"click\", () => {\n    openModal(refs.formRegisterModal);\n  });\n}\n\nif (refs.formRegisterCloseBtn) {\n  refs.formRegisterCloseBtn.addEventListener(\"click\", () => {\n    closeModal(refs.formRegisterModal);\n  });\n}\n\nif (refs.backgroundModal) {\n  refs.backgroundModal.addEventListener(\"click\", (event) => {\n    if (event.target === refs.backgroundModal) {\n      closeModal(refs.formLoginModal);\n      closeModal(refs.formRegisterModal);\n    }\n  });\n}\n\nif (refs.formRegister) {\n  refs.formRegister.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    const email = refs.registerEmailInput.value;\n    const password = refs.registerPasswordInput.value;\n    const name = refs.registerNameInput.value;\n    try {\n      await register(email, password, name);\n      monitorAuthState(userName); \n      closeModal(refs.formRegisterModal);\n    } catch (error) {\n      alert(\"Registration failed\");\n      console.error(\"Registration failed:\", error);\n    }\n  });\n}\n\nif (refs.formLogin) {\n  refs.formLogin.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    const email = refs.loginEmailInput.value;\n    const password = refs.loginPasswordInput.value;\n    try {\n      await login(email, password);\n      closeModal(refs.formLoginModal);\n    } catch (error) {\n      alert(\"Login failed\");\n      console.error(\"Login failed:\", error);\n    }\n  });\n}\n\nconst userName = (user) => {\n  if (user) {\n    if (user.displayName) {\n      refs.userInfo.style.display = \"flex\";\n      refs.userName.textContent = user.displayName;\n      refs.authBtn.classList.add(\"is-hidden\");\n\n    } else {\n      return;\n    }\n  } else {\n    refs.userInfo.style.display = \"none\";\n    refs.userName.textContent = \"\";\n    refs.authBtn.classList.remove(\"is-hidden\");\n  }\n};\n\n\nif (refs.signOutBtn) {\n  refs.signOutBtn.addEventListener(\"click\", () => {\n    signOutUser();\n  });\n}\n\nmonitorAuthState(userName);\n"],"names":["firebaseConfig","app","initializeApp","getAnalytics","auth","getAuth","register","email","password","displayName","user","createUserWithEmailAndPassword","updateProfile","error","errorCode","errorMessage","login","signInWithEmailAndPassword","signOutUser","signOut","monitorAuthState","updateUI","onAuthStateChanged","refs","handelKeyDown","e","closeModal","openModal","modal","event","name","userName"],"mappings":"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"}